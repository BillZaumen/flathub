cvrdecode(1)                     User Commands                    cvrdecode(1)



NNAAMMEE
       cvrdecode - extract data and verify a California digital vaccine record

SSYYNNOOPPSSIISS
       ccvvrrddeeccooddee [_O_P_T_I_O_N] [_F_I_L_E_N_A_M_E|_U_R_I]...

FFLLAATTPPAAKK SSYYNNOOPPSSIISS
       ffllaattppaakk rruunn oorrgg..bbzzddeevv..CCVVRRDDeeccooddee ----hheellpp|--??
       ffllaattppaakk rruunn oorrgg..bbzzddeevv..CCVVRRDDeeccooddee [_O_P_T_I_O_N] [_F_I_L_E_N_A_M_E|_U_R_I]...

DDEESSCCRRIIPPTTIIOONN
       The  program  cvrdecode, or its flatpak equivalent, prints out informa‐
       tion about a California digital vaccine record.  The California Depart‐
       ment  of  Public  Health is providing those vaccinated against COVID-19
       with a digital vaccination records consisting of a logo, some text, and
       a  QR  code  (Quick Response code). The printed text contains a summary
       whereas the QR code contains the same data that is on the CDC  vaccina‐
       tion record one gets after a vaccination. This digital record also con‐
       tains a digital signature to show that the record is authentic  -  that
       it  was  in  fact  obtained  from  the  California Department of Public
       Health. The program ccvvrrddeeccooddee was written in part to  handle  a  common
       use  case:  private events where participants email vaccination records
       to whoever is hosting the event.  Those records are then used to gener‐
       ate  a  list that is checked as people show up. A printout is typically
       used because the person checking vaccination status is usually a volun‐
       teer and who is going to do what is not known in advance. Automatically
       generating a sorted list from a collection of records makes the process
       easier for the individual hosting the event.

       This  program's  arguments,  aside from options, are the names of files
       containing images of the QR code, files containing the URI the QR  code
       encodes as plain ASCII text, the URI itself, or the symbol -- indicating
       that standard input should be read to obtain an image.  Files with  the
       extension ".shc" are assumed to contain a single line - an shc URI. Im‐
       age files should have names that end in the file-name  extensions  Java
       recognizes  for image files (e.g., "png" or "jpg", with the choice pos‐
       sibly system dependent).

       The default output is in CSV (Comma Separated Values) format  and  con‐
       sists  of  one line for each file name or URI, with an initial line la‐
       beling each column. CSV lines are sorted.  Options can change the  for‐
       mat of the output and are described below.   The CSV file can be opened
       by programs such as LibreOffice: spreadsheets typically allow CSV  data
       to be imported.

       If there are no command-line arguments, cvrdecode will be run as a win‐
       dow-based application.  It will display  a  window  containing  buttons
       with the ones applicable enabled.  The user must select an input direc‐
       tory and an output file by clicking the buttons named SSeett IInnppuutt  DDiirreecc‐‐
       ttoorryy  and SSeett OOuuttppuutt FFiillee respectively. When a value is set, the button
       will change color to a pale yellow. The input  directory  will  contain
       the  vaccination records, either as text files with the "shc" extension
       containing an sshhcc URI in textual  form,  or  as  images  containing  QR
       codes.  The  output  file is the name of a CSV file. If the output file
       name does not end in ".csv", that suffix will be appended to  the  file
       name.   When the "Run" button is pressed, the output will be generated.
       The user will be able to view this table by pressing the  "Show  Table"
       button.  Similarly,  to  check for errors, one can press the "Show Con‐
       sole" button.  Finally the "Exit" button  will  close  the  window  and
       exit.   A  CSV-formatted output will be generated. Generally, a user is
       expected to press the buttons in the order in which they appear,  skip‐
       ping  ones  that are not applicable. Using the first two, which set the
       input and output, is necessary as otherwise the "Run" option  will  not
       be  enabled.   Once enabled, the use of the "Show Table" and "Show Con‐
       sole" buttons is optional.  The "Show Table" option just  provides  the
       data  in the output file in a readable form and the "Show Console" but‐
       ton merely opens a console that contains any error  messages  generated
       by the software.

       When  the output indicates that an individual is fully vaccinated, that
       basically means that the individual has received the number  of  injec‐
       tions  expected  for the first vaccination in the record.  The software
       does not detect an inappropriate mix of vaccine types  or  vaccinations
       given  at  the wrong time - the assumption is that these sort of errors
       would be checked when the vaccine is provided. One  has  to  check  the
       last  vaccination  date  manually to verify that the required two weeks
       have elapsed.  The last vaccination date may be misleading if there  is
       an  additional  vaccination  beyond  the number required.  All of these
       limitations involve cases that should practically never occur in  prac‐
       tice during the useful life of this software.

OOPPTTIIOONNSS
       The options are

       ----     End of options.  This argument is necessary if the first non-op‐
              tion argument if a file name that for some  reason  starts  with
              "-". Otherwise it is not needed.

       --ii [_F_I_L_E]
              There  can be at most one remaining argument. If there is no ad‐
              ditional argument or the additional argument is --, a  series  of
              sshhcc  URIs,  one  per  line, is read from the standard input.  If
              there is an additional argument other than --,  it  must  be  the
              file  name  for  a  file containing sshhcc URIs, one per line.  The
              output will be in CSV (Comma Separated Values)  format,  with  a
              header  followed by a description of each record, one record per
              line.  The records will be sorted by family name,  given  names,
              and date of birth.

       --uu     The  remaining  arguments  must be file names or URIs that start
              with sshhcc:://.  The URIs will be extracted from the inputs  by  ei‐
              ther  decoding  a  QR code, reading a URI contained in a file as
              text, or accepting the URI passed literally as an argument. Each
              URI will be printed, one per line, on standard output.

       --vv [_F_I_L_E]
              The  remaining argument _F_I_L_E.  if present, must be either a file
              name for an image file, the character -- (denoting  standard  in‐
              put), or a URI that start with sshhcc:://.  If there are no remaining
              arguments, standard input is used.  The URI will be  either  ex‐
              tracted  from a QR code, copied from the content of the input or
              obtained from the literal value of an argument.   The  URI  will
              then  be decoded, and its contents pretty-printed.  A final line
              indicates if the signature was valid or not. This data  will  be
              sent to the standard output.

       --zz [_F_I_L_E]
              There  may be at most one additional argument: a file name _F_I_L_E,
              which may be either the name of a file or --, which denotes stan‐
              dard  input.  If there are no additional arguments, standard in‐
              put is read.  The input must be a ZIP file.  The files contained
              in  the ZIP file will be processed to generate a sorted CSV file
              as described above.

FFLLAATTPPAAKK OOPPTTIIOONNSS
       When run using ffllaattppaakk, an additional option is available:

       ----hheellpp|--hh|--??
              The manual page is displayed. These three options are equivalent
              and  are  provided to match various expectations of what options
              generate "help" output.


PPRRIIVVAACCYY
       If a web server  is  set  up  to  collect  California  digital  vaccine
       records,  the GPG public keys for users authorized to see these records
       can be stored and the server can allow these users to download  a  GPG-
       encrypted  ZIP file containing the records.  The following command will
       print out the CSV file for these records without having any  stored  in
       the file system:

              ggppgg --dd _E_N_C_R_Y_P_T_E_D___Z_I_P_F_I_L_E || ccvvrrddeeccooddee --zz

       GPG will ask for a passphrase to get access to the public key.  The CSV
       output does not contain particularly sensitive information: just a full
       name  with  a birth date, the last vaccination date, a true/false value
       indicating if a person is fully vaccinated, and a true/false value  in‐
       dicating  if the record was signed by the California Department of Pub‐
       lic Health.  The vaccine type and the location where  the  vaccine  was
       provided are not shown when the --zz option is used.






cvrdecode VERSION                  Aug 2021                       cvrdecode(1)
